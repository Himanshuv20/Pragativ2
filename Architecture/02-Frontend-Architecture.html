<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRAGATI.ai - Frontend Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #1976d2;
            padding-bottom: 15px;
        }
        h2 {
            color: #1976d2;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        .description {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #1976d2;
        }
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .component-item {
            background: #f1f8ff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #bbdefb;
        }
        .component-item h4 {
            color: #0d47a1;
            margin: 0 0 10px 0;
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .tech-item {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #b3e5fc;
        }
        .tech-item h4 {
            color: #01579b;
            margin: 0 0 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🌐 Crop Calendar 4.0 - Frontend Architecture</h1>
        
        <div class="description">
            <h3>🎨 Frontend Overview</h3>
            <p>The frontend is built as a modern React TypeScript application with Material-UI components, providing a responsive and intuitive user interface for farmers and agricultural advisors. It features a clean separation of concerns with dedicated layers for components, services, context management, and routing.</p>
        </div>

        <h2>🏗️ Frontend Component Architecture</h2>
        <div class="mermaid">
graph TB
    subgraph "Application Shell"
        APP[📱 App.tsx<br/>Main Application]
        ROUTER[🛤️ React Router<br/>Navigation]
        THEME[🎨 Material-UI Theme<br/>Agricultural Green]
        HEADER[📋 Header Component<br/>Navigation Bar]
    end

    subgraph "Context Providers"
        AUTH_CTX[🔐 AuthContext<br/>User Authentication]
        CROP_CTX[🌾 CropCalendarContext<br/>Global State]
        LOCALIZATION[🌍 LocalizationProvider<br/>Date/Time Formatting]
    end

    subgraph "Page Components"
        HOME[🏠 HomePage<br/>Dashboard]
        LOGIN[🔑 LoginPage<br/>Authentication]
        REGISTER[📝 RegistrationPage<br/>User Signup]
        CROP_CAL[🌾 CropCalendarPage<br/>Calendar Generation]
        SOIL[🔬 SoilAnalysisPage<br/>Soil Testing]
        WEATHER[🌤️ WeatherPage<br/>Weather Info]
        SOS[🚨 SOSEmergencyPage<br/>Emergency Services]
        MANDI[📈 MandiDataPage<br/>Market Prices]
        DEBT[💰 DebtCounselingPage<br/>Financial Advisory]
        SCHEMES[🏛️ GovernmentSchemesPage<br/>Subsidies & Schemes]
        SUSTAIN[♻️ SustainablePracticesPage<br/>Eco-friendly Farming]
    end

    subgraph "Reusable Components"
        LOCATION[📍 LocationStep<br/>GPS Selection]
        CROP_SELECT[🌱 CropSelectionStep<br/>Crop Picker]
        AREA[📏 AreaStep<br/>Land Area Input]
        CALENDAR_RESULTS[📅 CalendarResults<br/>Generated Calendar]
        MAP_PICKER[🗺️ MapLocationPicker<br/>Interactive Map]
        ACTION_TILE[🎯 ActionTile<br/>Feature Cards]
        SOS_BUTTON[🚨 SOSButton<br/>Emergency Button]
        MANDI_TRAINING[📊 MandiDataTraining<br/>ML Training UI]
        SUSTAINABLE[♻️ SustainablePractices<br/>Eco Practices]
    end

    subgraph "Service Layer"
        API[🔗 api.ts<br/>Main API Client]
        SOIL_API[🔬 soilAnalysisAPI.ts<br/>Soil Analysis API]
        WEATHER_API[🌤️ weatherAPI.ts<br/>Weather Services]
        MANDI_API[📈 mandiDataAPI.ts<br/>Market Data API]
        SOS_API[🚨 sosAPI.ts<br/>Emergency API]
        AUTH_API[🔐 authAPI.ts<br/>Authentication API]
    end

    subgraph "Utilities & Helpers"
        TYPES[📋 types/index.ts<br/>TypeScript Interfaces]
        UTILS[🛠️ utils/<br/>Helper Functions]
        CONSTANTS[📝 constants/<br/>App Constants]
        VALIDATORS[✅ validators/<br/>Form Validation]
    end

    %% Application Flow
    APP --> ROUTER
    APP --> THEME
    APP --> AUTH_CTX
    APP --> CROP_CTX
    APP --> LOCALIZATION
    
    ROUTER --> HEADER
    ROUTER --> HOME
    ROUTER --> LOGIN
    ROUTER --> REGISTER
    ROUTER --> CROP_CAL
    ROUTER --> SOIL
    ROUTER --> WEATHER
    ROUTER --> SOS
    ROUTER --> MANDI
    ROUTER --> DEBT
    ROUTER --> SCHEMES
    ROUTER --> SUSTAIN

    %% Component Dependencies
    CROP_CAL --> LOCATION
    CROP_CAL --> CROP_SELECT
    CROP_CAL --> AREA
    CROP_CAL --> CALENDAR_RESULTS
    
    SOIL --> MAP_PICKER
    HOME --> ACTION_TILE
    SOS --> SOS_BUTTON
    MANDI --> MANDI_TRAINING
    SUSTAIN --> SUSTAINABLE

    %% Service Connections
    HOME --> API
    CROP_CAL --> API
    SOIL --> SOIL_API
    WEATHER --> WEATHER_API
    MANDI --> MANDI_API
    SOS --> SOS_API
    LOGIN --> AUTH_API
    REGISTER --> AUTH_API

    %% Utility Connections
    API --> TYPES
    SOIL_API --> TYPES
    CROP_CAL --> VALIDATORS
    LOGIN --> VALIDATORS
    REGISTER --> VALIDATORS

    %% Context Usage
    AUTH_CTX --> LOGIN
    AUTH_CTX --> REGISTER
    AUTH_CTX --> HEADER
    CROP_CTX --> CROP_CAL
    CROP_CTX --> SOIL

    %% Styling
    classDef app fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef context fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef page fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef component fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef service fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    classDef utility fill:#f1f8e9,stroke:#689f38,stroke-width:2px

    class APP,ROUTER,THEME,HEADER app
    class AUTH_CTX,CROP_CTX,LOCALIZATION context
    class HOME,LOGIN,REGISTER,CROP_CAL,SOIL,WEATHER,SOS,MANDI,DEBT,SCHEMES,SUSTAIN page
    class LOCATION,CROP_SELECT,AREA,CALENDAR_RESULTS,MAP_PICKER,ACTION_TILE,SOS_BUTTON,MANDI_TRAINING,SUSTAINABLE component
    class API,SOIL_API,WEATHER_API,MANDI_API,SOS_API,AUTH_API service
    class TYPES,UTILS,CONSTANTS,VALIDATORS utility
        </div>

        <h2>🔄 Frontend Data Flow</h2>
        <div class="mermaid">
sequenceDiagram
    participant U as 👨‍🌾 User
    participant C as 🌐 Component
    participant CTX as 🔄 Context
    participant API as 🔗 API Service
    participant P as 🚀 Proxy Server
    participant B as 🖥️ Backend

    U->>C: User Interaction
    C->>CTX: Update Global State
    C->>API: API Call
    API->>P: HTTP Request
    P->>B: Forward to Backend
    B-->>P: JSON Response
    P-->>API: Return Data
    API-->>C: Processed Data
    C->>CTX: Update State
    CTX-->>C: State Change
    C-->>U: UI Update
        </div>

        <h2>🎨 UI Component Hierarchy</h2>
        <div class="mermaid">
graph TD
    APP[📱 App]
    APP --> HEADER[📋 Header]
    APP --> MAIN[🏠 Main Content Area]
    
    MAIN --> HOME_PAGE[🏠 Home Page]
    MAIN --> CROP_PAGE[🌾 Crop Calendar Page]
    MAIN --> SOIL_PAGE[🔬 Soil Analysis Page]
    MAIN --> OTHER_PAGES[📄 Other Pages...]

    HOME_PAGE --> HERO[🎯 Hero Section]
    HOME_PAGE --> FEATURES[🔧 Feature Grid]
    FEATURES --> ACTION_TILES[🎯 Action Tiles]

    CROP_PAGE --> STEPPER[📝 Multi-Step Form]
    STEPPER --> LOCATION_STEP[📍 Location Step]
    STEPPER --> CROP_STEP[🌱 Crop Selection Step]
    STEPPER --> AREA_STEP[📏 Area Step]
    STEPPER --> RESULTS[📅 Calendar Results]

    SOIL_PAGE --> MAP[🗺️ Map Location Picker]
    SOIL_PAGE --> FORM[📋 Analysis Form]
    SOIL_PAGE --> RECOMMENDATIONS[💡 Crop Recommendations]

    HEADER --> NAV[🧭 Navigation Menu]
    HEADER --> USER_MENU[👤 User Menu]
    HEADER --> SOS_BTN[🚨 SOS Button]

    %% Styling
    classDef primary fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef secondary fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef accent fill:#fff3e0,stroke:#ff9800,stroke-width:2px

    class APP,HEADER,MAIN primary
    class HOME_PAGE,CROP_PAGE,SOIL_PAGE,STEPPER,MAP,FORM secondary
    class HERO,FEATURES,ACTION_TILES,LOCATION_STEP,CROP_STEP,AREA_STEP,RESULTS,RECOMMENDATIONS,NAV,USER_MENU,SOS_BTN accent
        </div>

        <h2>🛠️ Frontend Technology Stack</h2>
        <div class="tech-stack">
            <div class="tech-item">
                <h4>Core Framework</h4>
                <p>React 18.2.0<br/>TypeScript 4.9.5<br/>Modern Hooks & Context</p>
            </div>
            <div class="tech-item">
                <h4>UI Framework</h4>
                <p>Material-UI (MUI) 5.x<br/>Agricultural Theme<br/>Responsive Design</p>
            </div>
            <div class="tech-item">
                <h4>Routing</h4>
                <p>React Router 6.x<br/>Client-side Navigation<br/>Protected Routes</p>
            </div>
            <div class="tech-item">
                <h4>State Management</h4>
                <p>React Context API<br/>useState & useEffect<br/>Global State</p>
            </div>
            <div class="tech-item">
                <h4>HTTP Client</h4>
                <p>Axios<br/>Request Interceptors<br/>Error Handling</p>
            </div>
            <div class="tech-item">
                <h4>Date/Time</h4>
                <p>Day.js<br/>Moment.js<br/>Date Pickers</p>
            </div>
            <div class="tech-item">
                <h4>Build Tools</h4>
                <p>Create React App<br/>Webpack<br/>Babel</p>
            </div>
            <div class="tech-item">
                <h4>Development</h4>
                <p>ESLint<br/>Prettier<br/>Hot Reload</p>
            </div>
        </div>

        <h2>📱 Key Frontend Components</h2>
        <div class="component-grid">
            <div class="component-item">
                <h4>🏠 HomePage</h4>
                <p>Main dashboard with feature tiles, quick access to all modules, and user welcome interface.</p>
            </div>
            <div class="component-item">
                <h4>🌾 CropCalendarPage</h4>
                <p>Multi-step wizard for crop calendar generation with location, crop selection, and area input.</p>
            </div>
            <div class="component-item">
                <h4>🔬 SoilAnalysisPage</h4>
                <p>Soil health analysis with interactive map, coordinate input, and comprehensive recommendations.</p>
            </div>
            <div class="component-item">
                <h4>📍 LocationStep</h4>
                <p>GPS-based location picker with manual coordinate input and address search functionality.</p>
            </div>
            <div class="component-item">
                <h4>🌱 CropSelectionStep</h4>
                <p>Comprehensive crop selection interface with search, categories, and detailed crop information.</p>
            </div>
            <div class="component-item">
                <h4>📅 CalendarResults</h4>
                <p>Generated crop calendar display with planting dates, fertilization schedule, and harvest timeline.</p>
            </div>
            <div class="component-item">
                <h4>🗺️ MapLocationPicker</h4>
                <p>Interactive map component for precise location selection with coordinate display.</p>
            </div>
            <div class="component-item">
                <h4>🚨 SOSButton</h4>
                <p>Emergency access button available on all pages for quick agricultural emergency services.</p>
            </div>
            <div class="component-item">
                <h4>🎯 ActionTile</h4>
                <p>Reusable feature cards for homepage navigation with icons, titles, and descriptions.</p>
            </div>
            <div class="component-item">
                <h4>📊 MandiDataTraining</h4>
                <p>Machine learning model training interface for market price prediction.</p>
            </div>
        </div>

        <h2>🎨 UI/UX Design Principles</h2>
        <div class="description">
            <h3>Design Philosophy</h3>
            <ul>
                <li><strong>Agricultural Theme:</strong> Green color palette reflecting nature and agriculture</li>
                <li><strong>Responsive Design:</strong> Mobile-first approach for farmers using smartphones</li>
                <li><strong>Accessibility:</strong> High contrast, readable fonts, keyboard navigation</li>
                <li><strong>Progressive Enhancement:</strong> Works on low-bandwidth connections</li>
                <li><strong>Intuitive Navigation:</strong> Clear information hierarchy and user flows</li>
                <li><strong>Visual Feedback:</strong> Loading states, success/error messages, progress indicators</li>
            </ul>
        </div>

        <h2>🔌 API Integration Layer</h2>
        <div class="mermaid">
graph LR
    subgraph "Frontend Services"
        API_CLIENT[🔗 API Client<br/>Axios Instance]
        AUTH_SERVICE[🔐 Auth Service<br/>JWT Management]
        ERROR_HANDLER[❌ Error Handler<br/>Global Error Handling]
    end

    subgraph "Specialized APIs"
        SOIL_SERVICE[🔬 Soil Analysis API]
        WEATHER_SERVICE[🌤️ Weather API]
        MANDI_SERVICE[📈 Mandi Data API]
        SOS_SERVICE[🚨 Emergency API]
        CROP_SERVICE[🌾 Crop Calendar API]
    end

    subgraph "Backend Endpoints"
        BACKEND[🖥️ Express Server<br/>Port 5000]
    end

    API_CLIENT --> AUTH_SERVICE
    API_CLIENT --> ERROR_HANDLER
    
    SOIL_SERVICE --> API_CLIENT
    WEATHER_SERVICE --> API_CLIENT
    MANDI_SERVICE --> API_CLIENT
    SOS_SERVICE --> API_CLIENT
    CROP_SERVICE --> API_CLIENT

    API_CLIENT --> BACKEND

    %% Styling
    classDef service fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef api fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef backend fill:#fff3e0,stroke:#ff9800,stroke-width:2px

    class API_CLIENT,AUTH_SERVICE,ERROR_HANDLER service
    class SOIL_SERVICE,WEATHER_SERVICE,MANDI_SERVICE,SOS_SERVICE,CROP_SERVICE api
    class BACKEND backend
        </div>

        <div class="description">
            <h3>🚀 Frontend Performance Optimizations</h3>
            <ul>
                <li><strong>Code Splitting:</strong> Lazy loading of route components</li>
                <li><strong>Bundle Optimization:</strong> Tree shaking and minification</li>
                <li><strong>Caching Strategy:</strong> Service worker for offline functionality</li>
                <li><strong>Image Optimization:</strong> WebP format, lazy loading</li>
                <li><strong>API Optimization:</strong> Request debouncing, response caching</li>
                <li><strong>Memory Management:</strong> Proper cleanup of event listeners and timers</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#1976d2',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#1565c0',
                lineColor: '#34495e',
                sectionBkgColor: '#f8f9fa',
                altSectionBkgColor: '#e3f2fd',
                gridColor: '#bdc3c7',
                secondaryColor: '#e8f5e8',
                tertiaryColor: '#fff3e0'
            }
        });
    </script>
</body>
</html>
