<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRAGATI.ai - Frontend Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #1976d2;
            padding-bottom: 15px;
        }
        h2 {
            color: #1976d2;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        .description {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #1976d2;
        }
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .component-item {
            background: #f1f8ff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #bbdefb;
        }
        .component-item h4 {
            color: #0d47a1;
            margin: 0 0 10px 0;
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .tech-item {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #b3e5fc;
        }
        .tech-item h4 {
            color: #01579b;
            margin: 0 0 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Crop Calendar 4.0 - Frontend Architecture</h1>
        
        <div class="description">
            <h3>ğŸ¨ Frontend Overview</h3>
            <p>The frontend is built as a modern React TypeScript application with Material-UI components, providing a responsive and intuitive user interface for farmers and agricultural advisors. It features a clean separation of concerns with dedicated layers for components, services, context management, and routing.</p>
        </div>

        <h2>ğŸ—ï¸ Frontend Component Architecture</h2>
        <div class="mermaid">
graph TB
    subgraph "Application Shell"
        APP[ğŸ“± App.tsx<br/>Main Application]
        ROUTER[ğŸ›¤ï¸ React Router<br/>Navigation]
        THEME[ğŸ¨ Material-UI Theme<br/>Agricultural Green]
        HEADER[ğŸ“‹ Header Component<br/>Navigation Bar]
    end

    subgraph "Context Providers"
        AUTH_CTX[ğŸ” AuthContext<br/>User Authentication]
        CROP_CTX[ğŸŒ¾ CropCalendarContext<br/>Global State]
        LOCALIZATION[ğŸŒ LocalizationProvider<br/>Date/Time Formatting]
    end

    subgraph "Page Components"
        HOME[ğŸ  HomePage<br/>Dashboard]
        LOGIN[ğŸ”‘ LoginPage<br/>Authentication]
        REGISTER[ğŸ“ RegistrationPage<br/>User Signup]
        CROP_CAL[ğŸŒ¾ CropCalendarPage<br/>Calendar Generation]
        SOIL[ğŸ”¬ SoilAnalysisPage<br/>Soil Testing]
        WEATHER[ğŸŒ¤ï¸ WeatherPage<br/>Weather Info]
        SOS[ğŸš¨ SOSEmergencyPage<br/>Emergency Services]
        MANDI[ğŸ“ˆ MandiDataPage<br/>Market Prices]
        DEBT[ğŸ’° DebtCounselingPage<br/>Financial Advisory]
        SCHEMES[ğŸ›ï¸ GovernmentSchemesPage<br/>Subsidies & Schemes]
        SUSTAIN[â™»ï¸ SustainablePracticesPage<br/>Eco-friendly Farming]
    end

    subgraph "Reusable Components"
        LOCATION[ğŸ“ LocationStep<br/>GPS Selection]
        CROP_SELECT[ğŸŒ± CropSelectionStep<br/>Crop Picker]
        AREA[ğŸ“ AreaStep<br/>Land Area Input]
        CALENDAR_RESULTS[ğŸ“… CalendarResults<br/>Generated Calendar]
        MAP_PICKER[ğŸ—ºï¸ MapLocationPicker<br/>Interactive Map]
        ACTION_TILE[ğŸ¯ ActionTile<br/>Feature Cards]
        SOS_BUTTON[ğŸš¨ SOSButton<br/>Emergency Button]
        MANDI_TRAINING[ğŸ“Š MandiDataTraining<br/>ML Training UI]
        SUSTAINABLE[â™»ï¸ SustainablePractices<br/>Eco Practices]
    end

    subgraph "Service Layer"
        API[ğŸ”— api.ts<br/>Main API Client]
        SOIL_API[ğŸ”¬ soilAnalysisAPI.ts<br/>Soil Analysis API]
        WEATHER_API[ğŸŒ¤ï¸ weatherAPI.ts<br/>Weather Services]
        MANDI_API[ğŸ“ˆ mandiDataAPI.ts<br/>Market Data API]
        SOS_API[ğŸš¨ sosAPI.ts<br/>Emergency API]
        AUTH_API[ğŸ” authAPI.ts<br/>Authentication API]
    end

    subgraph "Utilities & Helpers"
        TYPES[ğŸ“‹ types/index.ts<br/>TypeScript Interfaces]
        UTILS[ğŸ› ï¸ utils/<br/>Helper Functions]
        CONSTANTS[ğŸ“ constants/<br/>App Constants]
        VALIDATORS[âœ… validators/<br/>Form Validation]
    end

    %% Application Flow
    APP --> ROUTER
    APP --> THEME
    APP --> AUTH_CTX
    APP --> CROP_CTX
    APP --> LOCALIZATION
    
    ROUTER --> HEADER
    ROUTER --> HOME
    ROUTER --> LOGIN
    ROUTER --> REGISTER
    ROUTER --> CROP_CAL
    ROUTER --> SOIL
    ROUTER --> WEATHER
    ROUTER --> SOS
    ROUTER --> MANDI
    ROUTER --> DEBT
    ROUTER --> SCHEMES
    ROUTER --> SUSTAIN

    %% Component Dependencies
    CROP_CAL --> LOCATION
    CROP_CAL --> CROP_SELECT
    CROP_CAL --> AREA
    CROP_CAL --> CALENDAR_RESULTS
    
    SOIL --> MAP_PICKER
    HOME --> ACTION_TILE
    SOS --> SOS_BUTTON
    MANDI --> MANDI_TRAINING
    SUSTAIN --> SUSTAINABLE

    %% Service Connections
    HOME --> API
    CROP_CAL --> API
    SOIL --> SOIL_API
    WEATHER --> WEATHER_API
    MANDI --> MANDI_API
    SOS --> SOS_API
    LOGIN --> AUTH_API
    REGISTER --> AUTH_API

    %% Utility Connections
    API --> TYPES
    SOIL_API --> TYPES
    CROP_CAL --> VALIDATORS
    LOGIN --> VALIDATORS
    REGISTER --> VALIDATORS

    %% Context Usage
    AUTH_CTX --> LOGIN
    AUTH_CTX --> REGISTER
    AUTH_CTX --> HEADER
    CROP_CTX --> CROP_CAL
    CROP_CTX --> SOIL

    %% Styling
    classDef app fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef context fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef page fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef component fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef service fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    classDef utility fill:#f1f8e9,stroke:#689f38,stroke-width:2px

    class APP,ROUTER,THEME,HEADER app
    class AUTH_CTX,CROP_CTX,LOCALIZATION context
    class HOME,LOGIN,REGISTER,CROP_CAL,SOIL,WEATHER,SOS,MANDI,DEBT,SCHEMES,SUSTAIN page
    class LOCATION,CROP_SELECT,AREA,CALENDAR_RESULTS,MAP_PICKER,ACTION_TILE,SOS_BUTTON,MANDI_TRAINING,SUSTAINABLE component
    class API,SOIL_API,WEATHER_API,MANDI_API,SOS_API,AUTH_API service
    class TYPES,UTILS,CONSTANTS,VALIDATORS utility
        </div>

        <h2>ğŸ”„ Frontend Data Flow</h2>
        <div class="mermaid">
sequenceDiagram
    participant U as ğŸ‘¨â€ğŸŒ¾ User
    participant C as ğŸŒ Component
    participant CTX as ğŸ”„ Context
    participant API as ğŸ”— API Service
    participant P as ğŸš€ Proxy Server
    participant B as ğŸ–¥ï¸ Backend

    U->>C: User Interaction
    C->>CTX: Update Global State
    C->>API: API Call
    API->>P: HTTP Request
    P->>B: Forward to Backend
    B-->>P: JSON Response
    P-->>API: Return Data
    API-->>C: Processed Data
    C->>CTX: Update State
    CTX-->>C: State Change
    C-->>U: UI Update
        </div>

        <h2>ğŸ¨ UI Component Hierarchy</h2>
        <div class="mermaid">
graph TD
    APP[ğŸ“± App]
    APP --> HEADER[ğŸ“‹ Header]
    APP --> MAIN[ğŸ  Main Content Area]
    
    MAIN --> HOME_PAGE[ğŸ  Home Page]
    MAIN --> CROP_PAGE[ğŸŒ¾ Crop Calendar Page]
    MAIN --> SOIL_PAGE[ğŸ”¬ Soil Analysis Page]
    MAIN --> OTHER_PAGES[ğŸ“„ Other Pages...]

    HOME_PAGE --> HERO[ğŸ¯ Hero Section]
    HOME_PAGE --> FEATURES[ğŸ”§ Feature Grid]
    FEATURES --> ACTION_TILES[ğŸ¯ Action Tiles]

    CROP_PAGE --> STEPPER[ğŸ“ Multi-Step Form]
    STEPPER --> LOCATION_STEP[ğŸ“ Location Step]
    STEPPER --> CROP_STEP[ğŸŒ± Crop Selection Step]
    STEPPER --> AREA_STEP[ğŸ“ Area Step]
    STEPPER --> RESULTS[ğŸ“… Calendar Results]

    SOIL_PAGE --> MAP[ğŸ—ºï¸ Map Location Picker]
    SOIL_PAGE --> FORM[ğŸ“‹ Analysis Form]
    SOIL_PAGE --> RECOMMENDATIONS[ğŸ’¡ Crop Recommendations]

    HEADER --> NAV[ğŸ§­ Navigation Menu]
    HEADER --> USER_MENU[ğŸ‘¤ User Menu]
    HEADER --> SOS_BTN[ğŸš¨ SOS Button]

    %% Styling
    classDef primary fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef secondary fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef accent fill:#fff3e0,stroke:#ff9800,stroke-width:2px

    class APP,HEADER,MAIN primary
    class HOME_PAGE,CROP_PAGE,SOIL_PAGE,STEPPER,MAP,FORM secondary
    class HERO,FEATURES,ACTION_TILES,LOCATION_STEP,CROP_STEP,AREA_STEP,RESULTS,RECOMMENDATIONS,NAV,USER_MENU,SOS_BTN accent
        </div>

        <h2>ğŸ› ï¸ Frontend Technology Stack</h2>
        <div class="tech-stack">
            <div class="tech-item">
                <h4>Core Framework</h4>
                <p>React 18.2.0<br/>TypeScript 4.9.5<br/>Modern Hooks & Context</p>
            </div>
            <div class="tech-item">
                <h4>UI Framework</h4>
                <p>Material-UI (MUI) 5.x<br/>Agricultural Theme<br/>Responsive Design</p>
            </div>
            <div class="tech-item">
                <h4>Routing</h4>
                <p>React Router 6.x<br/>Client-side Navigation<br/>Protected Routes</p>
            </div>
            <div class="tech-item">
                <h4>State Management</h4>
                <p>React Context API<br/>useState & useEffect<br/>Global State</p>
            </div>
            <div class="tech-item">
                <h4>HTTP Client</h4>
                <p>Axios<br/>Request Interceptors<br/>Error Handling</p>
            </div>
            <div class="tech-item">
                <h4>Date/Time</h4>
                <p>Day.js<br/>Moment.js<br/>Date Pickers</p>
            </div>
            <div class="tech-item">
                <h4>Build Tools</h4>
                <p>Create React App<br/>Webpack<br/>Babel</p>
            </div>
            <div class="tech-item">
                <h4>Development</h4>
                <p>ESLint<br/>Prettier<br/>Hot Reload</p>
            </div>
        </div>

        <h2>ğŸ“± Key Frontend Components</h2>
        <div class="component-grid">
            <div class="component-item">
                <h4>ğŸ  HomePage</h4>
                <p>Main dashboard with feature tiles, quick access to all modules, and user welcome interface.</p>
            </div>
            <div class="component-item">
                <h4>ğŸŒ¾ CropCalendarPage</h4>
                <p>Multi-step wizard for crop calendar generation with location, crop selection, and area input.</p>
            </div>
            <div class="component-item">
                <h4>ğŸ”¬ SoilAnalysisPage</h4>
                <p>Soil health analysis with interactive map, coordinate input, and comprehensive recommendations.</p>
            </div>
            <div class="component-item">
                <h4>ğŸ“ LocationStep</h4>
                <p>GPS-based location picker with manual coordinate input and address search functionality.</p>
            </div>
            <div class="component-item">
                <h4>ğŸŒ± CropSelectionStep</h4>
                <p>Comprehensive crop selection interface with search, categories, and detailed crop information.</p>
            </div>
            <div class="component-item">
                <h4>ğŸ“… CalendarResults</h4>
                <p>Generated crop calendar display with planting dates, fertilization schedule, and harvest timeline.</p>
            </div>
            <div class="component-item">
                <h4>ğŸ—ºï¸ MapLocationPicker</h4>
                <p>Interactive map component for precise location selection with coordinate display.</p>
            </div>
            <div class="component-item">
                <h4>ğŸš¨ SOSButton</h4>
                <p>Emergency access button available on all pages for quick agricultural emergency services.</p>
            </div>
            <div class="component-item">
                <h4>ğŸ¯ ActionTile</h4>
                <p>Reusable feature cards for homepage navigation with icons, titles, and descriptions.</p>
            </div>
            <div class="component-item">
                <h4>ğŸ“Š MandiDataTraining</h4>
                <p>Machine learning model training interface for market price prediction.</p>
            </div>
        </div>

        <h2>ğŸ¨ UI/UX Design Principles</h2>
        <div class="description">
            <h3>Design Philosophy</h3>
            <ul>
                <li><strong>Agricultural Theme:</strong> Green color palette reflecting nature and agriculture</li>
                <li><strong>Responsive Design:</strong> Mobile-first approach for farmers using smartphones</li>
                <li><strong>Accessibility:</strong> High contrast, readable fonts, keyboard navigation</li>
                <li><strong>Progressive Enhancement:</strong> Works on low-bandwidth connections</li>
                <li><strong>Intuitive Navigation:</strong> Clear information hierarchy and user flows</li>
                <li><strong>Visual Feedback:</strong> Loading states, success/error messages, progress indicators</li>
            </ul>
        </div>

        <h2>ğŸ”Œ API Integration Layer</h2>
        <div class="mermaid">
graph LR
    subgraph "Frontend Services"
        API_CLIENT[ğŸ”— API Client<br/>Axios Instance]
        AUTH_SERVICE[ğŸ” Auth Service<br/>JWT Management]
        ERROR_HANDLER[âŒ Error Handler<br/>Global Error Handling]
    end

    subgraph "Specialized APIs"
        SOIL_SERVICE[ğŸ”¬ Soil Analysis API]
        WEATHER_SERVICE[ğŸŒ¤ï¸ Weather API]
        MANDI_SERVICE[ğŸ“ˆ Mandi Data API]
        SOS_SERVICE[ğŸš¨ Emergency API]
        CROP_SERVICE[ğŸŒ¾ Crop Calendar API]
    end

    subgraph "Backend Endpoints"
        BACKEND[ğŸ–¥ï¸ Express Server<br/>Port 5000]
    end

    API_CLIENT --> AUTH_SERVICE
    API_CLIENT --> ERROR_HANDLER
    
    SOIL_SERVICE --> API_CLIENT
    WEATHER_SERVICE --> API_CLIENT
    MANDI_SERVICE --> API_CLIENT
    SOS_SERVICE --> API_CLIENT
    CROP_SERVICE --> API_CLIENT

    API_CLIENT --> BACKEND

    %% Styling
    classDef service fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef api fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef backend fill:#fff3e0,stroke:#ff9800,stroke-width:2px

    class API_CLIENT,AUTH_SERVICE,ERROR_HANDLER service
    class SOIL_SERVICE,WEATHER_SERVICE,MANDI_SERVICE,SOS_SERVICE,CROP_SERVICE api
    class BACKEND backend
        </div>

        <div class="description">
            <h3>ğŸš€ Frontend Performance Optimizations</h3>
            <ul>
                <li><strong>Code Splitting:</strong> Lazy loading of route components</li>
                <li><strong>Bundle Optimization:</strong> Tree shaking and minification</li>
                <li><strong>Caching Strategy:</strong> Service worker for offline functionality</li>
                <li><strong>Image Optimization:</strong> WebP format, lazy loading</li>
                <li><strong>API Optimization:</strong> Request debouncing, response caching</li>
                <li><strong>Memory Management:</strong> Proper cleanup of event listeners and timers</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#1976d2',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#1565c0',
                lineColor: '#34495e',
                sectionBkgColor: '#f8f9fa',
                altSectionBkgColor: '#e3f2fd',
                gridColor: '#bdc3c7',
                secondaryColor: '#e8f5e8',
                tertiaryColor: '#fff3e0'
            }
        });
    </script>
</body>
</html>
